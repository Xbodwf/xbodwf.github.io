<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正在跳转</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background: #fafafa; color: #999; }
    </style>
</head>
<body>

<div id="status">正在处理请求...</div>

<script>
    (function() {
        const urlParams = new URLSearchParams(window.location.search);
        const encoded = urlParams.get('target');
        
        // 默认值：bilibili://video/BV1QwFyzfEya 的 Base64 编码
        // 编码结果：YmlsaWJpbGk6Ly92aWRlby9CVjFRd0Z5emZFeWE=
        const defaultBase64 = "YmlsaWJpbGk6Ly92aWRlby9CVjFRd0Z5emZFeWE=";
        
        const targetBase64 = encoded || defaultBase64;

        try {
            // 1. 解码 Base64
            const finalUrl = atob(targetBase64);

            // 2. 直接替换地址
            // 如果是 bilibili:// 协议，浏览器会尝试唤起 App
            // 如果是 https:// 协议，浏览器会直接跳到网页
            window.location.replace(finalUrl);
            setTimeout(() => {
    // 如果你不想让他跳网页，可以在这里强行停止或跳往别处
               window.stop(); 
            }, 500);

        } catch (e) {
            document.getElementById('status').innerText = "链接解析失败";
        }
    })();
</script>

</body>
</html>

</html>
